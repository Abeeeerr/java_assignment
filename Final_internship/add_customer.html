<!DOCTYPE html>
<html>
<head>
    <title>Assignment - Add New Customer</title>
</head>
<body>
    <h1>Create New Customer</h1>
    <div>
        <label for="newFirstName">First Name:</label>
        <input type="text" id="newFirstName" />
        <br>
        <label for="newLastName">Last Name:</label>
        <input type="text" id="newLastName" />
        <br>
        <label for="newStreet">Street:</label>
        <input type="text" id="newStreet" />
        <br>
        <label for="newAddress">Address:</label>
        <input type="text" id="newAddress" />
        <br>
        <label for="newCity">City:</label>
        <input type="text" id="newCity" />
        <br>
        <label for="newState">State:</label>
        <input type="text" id="newState" />
        <br>
        <label for="newEmail">Email:</label>
        <input type="email" id="newEmail" />
        <br>
        <label for="newPhone">Phone:</label>
        <input type="tel" id="newPhone" />
        <br>
        <button onclick="createCustomer()">Create Customer</button>
    </div>

    <script>
        const token = "dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM="; // Replace with the provided token

        // Function to create a new customer
        async function createCustomer() {
            const data = {
                cmd: "create",
                first_name: document.getElementById("newFirstName").value,
                last_name: document.getElementById("newLastName").value,
                street: document.getElementById("newStreet").value,
                address: document.getElementById("newAddress").value,
                city: document.getElementById("newCity").value,
                state: document.getElementById("newState").value,
                email: document.getElementById("newEmail").value,
                phone: document.getElementById("newPhone").value
            };

            try {
                const response = await fetch("https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error("Failed to create customer.");
                }

                // Rest of the code for handling the API response and displaying the result
                alert("Customer created successfully.");
                // Clear input fields after successful creation
                document.getElementById("newFirstName").value = "";
                document.getElementById("newLastName").value = "";
                document.getElementById("newStreet").value = "";
                document.getElementById("newAddress").value = "";
                document.getElementById("newCity").value = "";
                document.getElementById("newState").value = "";
                document.getElementById("newEmail").value = "";
                document.getElementById("newPhone").value = "";
            } catch (error) {
                console.error("Error creating customer:", error);
                alert("Failed to create the customer. Please try again later.");
            }
        }
    </script>
</body>
</html>
